<r:set_var name="page_slug">
  <r:page:slug />
</r:set_var>

<div class="wvu-adverts <r:page:content name="so-background-color-class--adverts" /> background">
  <div class="wvu-adverts__container">

    <r:page:if_has_content_for region="wvu-adverts__header" always_show_in_edit_mode="true">
      <div class="wvu-adverts__header">
        <r:editable_region name="wvu-adverts__header">
          <h2>Advertisements Header</h2>
          <p>
            Subhead goes here.
          </p>
        </r:editable_region>
      </div>
    </r:page:if_has_content_for>

    <r:root>

      <r:descendants order="asc" labels="advert, {$page_slug}" labels_match="any">
        <div class="wvu-adverts__adverts wvu-adverts__adverts--<r:count />">
          <r:each>
            <div class="wvu-adverts__advertisement wvu-adverts__advertisement--<r:page:slug />">
              <div class="wvu-adverts__ad-text">
                <a href="<r:if expr="{{ NOT(BLANK(alternate_url)) }}"><r:page:data name="alternate_url" /></r:if><r:if expr="{{ BLANK(alternate_url) }}"><r:page:url /></r:if>"><span><r:page:first_non_blank_attr names="alternate_name,name" /></span></a>
              </div>
              <a href="<r:if expr="{{ NOT(BLANK(alternate_url)) }}"><r:page:data name="alternate_url" /></r:if><r:if expr="{{ BLANK(alternate_url) }}"><r:page:url /></r:if>"><img src="<r:page:data name="thumbnail_url" />" alt="<r:if expr="{{ NOT(BLANK(thumbnail_alt)) }}"><r:page:data name="thumbnail_alt /></r:if>" /></a>
            </div>
          </r:each>
        </div>
      </r:descendants>

    </r:root>

  </div>
</div>

<r:edit_mode_only>
  <div class="wvu-instructions">
    <p><strong>Instructions for Adverts:</strong> Show a list of advertisements. This loops through the children of a page e.g. &ldquo;Advertisments&rdquo; and pulls a photo and page title to create ads automatically. Enter the ID of the parent page in the <strong>adverts_id</strong> field of the your page properties. Label each ad with a label that corresponds to the page slug of the page you wish the ad to display. For example, if you wan the ad to show on the "About Us" page, you would label the ad "about-us".</p>
    <p><strong>Background Color:</strong> <r:editable_region name="so-background-color-class--adverts" /></p>
  </div>
</r:edit_mode_only>
